---
marp: true
theme: default
style: |
    section {
        font-family: 'Arial', sans-serif;
        font-size: 20px;
    }

header: EDA
footer: БГУ ФПМИ ФМИиС 
---

<!-- _class: lead -->
# **Искусство разведывательного анализа данных (EDA)**
### Исчерпывающее руководство по визуализации: от плохого графика к ясному инсайту

---

## Что вас ждет

1.  **Философия EDA:** Зачем мы это делаем?
2.  Принцип «Show, don't tell»
3.  Принцип «So what?»
4.  Классификация графиков по цели
5.  **Галерея графиков:** Подробный разбор каждого типа
20. Сравнительная таблица: Какой график выбрать?
21. Трансформация плохого графика в хороший
26. Цвета и доступность
27. Аннотации и повествование
28. Инструменты для построения
29. Золотые правила визуализации
30. Заключение

---

## EDA — это диалог с данными

*   Почувствовать данные, обнаружить паттерны, аномалии и связи.
*    Сгенерировать гипотезы для дальнейшего проверки статистикой и ML-моделями.
*   Подготовить данные к моделированию, поняв их природу.
*   **Ключевой инструмент:** Визуализация. Мозг человека на порядки лучше воспринимает картинки, чем таблицы с числами.
> «Лучше один раз увидеть, чем сто раз запустить `df.describe()`».

![bg right:40% w:400](https://upload.wikimedia.org/wikipedia/commons/thumb/e/ec/Anscombe%27s_quartet_3.svg/500px-Anscombe%27s_quartet_3.svg.png)

---

## Принцип «Show, don't tell»

### Показывай, а не рассказывай

*   **Плохо:** Просто сказать фразу «У нас есть два кластера пользователей: с высоким и низким доходом».
*   **Хорошо:** Построить scatter plot, где по осям доход и расходы, и где явно видно две отдельные группы точек.
*   **Суть:** Визуализация должна быть настолько ясной и очевидной, что не требует сложных пояснений. Она сама рассказывает историю.
*   **Как достичь?** Правильный выбор типа графика, аккуратное оформление, отсутствие «визуального мусора».

![bg vertical right:40% w:300](https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcR9OUGLA2ER-3H8fJdOZKFiHYAXaKFQFptwFFa8otbXqh7r6uXXionhJuiHCUMk)
![bg right:40% w:300](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSEfRypXMarrIZuC7gGk8G7KzkPTBXXZppt0DrTxjlxpJ7tRKSJTdd4ZmiXbBAw)

---

## Принцип «So what?»

### Всегда задавай вопрос «И что?»

Построить красивый график, но который не отвечает ни на один вопрос - плохо.
Каждая визуализация должна иметь цель и отвечать на конкретный вопрос.

**Примеры вопросов:**
*   «Как распределена цена недвижимости?» -> Гистограмма.
*   «Есть ли связь между бюджетом на фильм и его сборами?» -> Scatter plot.
*   «В каком месяце наши продажи максимальны?» -> Line plot.

Прежде чем строить график, спроси себя: «Что я хочу чтоб стало понятно, глядя на этот график?»

![bg right:40% w:500](https://junkcharts.typepad.com/.a/6a00d8341e992c53ef017ee6ec98d3970d-450wi)

---

## Классификация графиков по цели

### Какой график для чего?

*   **Распределение одной числовой переменной:** Гистограмма, KDE plot, Box plot.
*   **Распределение одной категориальной переменной:** Bar chart, Pie chart (не рекомендуется).
*   **Связь между двумя числовыми переменными:** Scatter plot, Hexbin plot, Линейный график.
*   **Связь между числовой и категориальной переменными:** Box plot, Violin plot, Bar chart.
*   **Связь между двумя категориальными переменными:** Heatmap, Сгруппированная столбчатая диаграмма.
*   **Данные за время:** Line chart, Area chart.
*   **Многомерные данные (3+ измерения):** Scatter plot с цветом/размером, Bubble chart.

![bg right:40% w:500](https://cloud.pllsll.ru/1366x/pollskill/storage/6d/50/75/2a78c9d5ec9.png)

---

## Гистограмма (Histogram)

### Форма распределения

**Что показывает:** Как часто значения числовой переменной попадают в определенные интервалы. По смыслу - то же самое что график распределения случайной величины $p(x)$, но в случае имеющейся фатической выборки, а не аналитической формулы.

**Примеры случаев применения:**
*   Увидеть форму распределения (нормальное, бимодальное, скошенное).
*   Оценить разброс данных.
*   Обнаружить выбросы.

Используем, когда нужно понять **распределение** одной непрерывной переменной.
**Пример:** Распределение возраста клиентов, роста, цены на акции.

![bg right:40% w:400](https://clauswilke.com/dataviz/visualizing_distributions_I_files/figure-html/butterfat-densitites-1.png)

---

## KDE Plot (Kernel Density Estimate)

*   **Что показывает:** Сглаженную оценку плотности распределения числовой переменной.
*   **Кейсы применения:**
    *   Сравнение распределений нескольких групп на одном графике.
    *   Получение более плавного представления о распределении.
*   **Выбор в его пользу:** Для красивого и четкого **сравнения распределений** 2-4 групп.
*   **Пример:** Сравнение распределения доходов в разных странах.

![bg right:40% w:400](https://seaborn.pydata.org/_images/kdeplot_31_0.png)

---

## Box Plot (Ящик с усами)

*   **Что показывает:** Основные квантили распределения (IQR, медиана, выбросы).
*   **Кейсы применения:**
    *   Быстрое сравнение распределений по нескольким группам.
    *   Визуальное определение медианы, размаха и выбросов.
*   **Выбор в его пользу:** Когда нужно компактно и **статистически точно** сравнить несколько распределений.
*   **Пример:** Сравнение оценок студентов по разным предметам.

![bg right:40% w:500](https://miro.medium.com/max/9000/1*2c21SkzJMf3frPXPAR_gZA.png)

---

## Violin Plot

### Гибрид KDE и Box Plot

*   **Что показывает:** Форму плотности распределения и встроенный box plot с квантилями.
*   **Кейсы применения:**
    *   Более детальное, чем box plot, сравнение распределений.
    *   Показывает, где именно сконцентрированы данные.
*   **Выбор в его пользу:** Когда **и форма, и статистика** важны одновременно.
*   **Пример:** Сравнение времени на сайте для пользователей из разных источников.

![bg right:40% w:400](https://media.geeksforgeeks.org/wp-content/uploads/20240919172722/Screenshot-2024-09-19-172646.jpg)

---

## Bar Chart (Столбчатая диаграмма)

### Сравнение величин

*   **Что показывает:** Сравнение значений (частостот, средних, сумм) для разных категорий.
*   **Кейсы применения:**
    *   Сравнение количества или среднего значения по категориям.
    *   Визуализация топ-N элементов.
*   **Выбор в его пользу:** Для отображения **абсолютных или усредненных значений** по **категориальным** данным.
*   **Пример:** Количество продаж по регионам, средний чек по типам товаров.

**ВАЖНО:** Не путать с гистограммой! Гистограмма для распределения, bar chart — для сравнения категорий.
![bg right:40% w:500](https://ichef.bbci.co.uk/images/ic/1200xn/p0fbqyln.png)

---

## Pie Chart (Круговая диаграмма)

### (Почти всегда) плохой выбор

*   **Что показывает:** Доли частей от целого.
*   **Кейсы применения:** Показать простую долю от 100% для 2-3 категорий.
*   **Выбор в его пользу:** Почти никогда. Человеческий глаз плохо сравнивает площади и углы.
*   **Почему это плохо?** Сложно точно сравнить доли.
*   **Лучшая альтернатива:** Bar chart или stacked bar chart.

![bg vertical right:50% w:550](https://www.theinformationlab.nl/wp-content/uploads/2021/09/4_Pie-vs-bars.png)

---

## Scatter Plot (Диаграмма рассеяния)

### Отношения и корреляции

*   **Что показывает:** Отношение между двумя числовыми переменными. Каждая точка — наблюдение.
*   **Кейсы применения:**
    *   Поиск корреляций.
    *   Выявление кластеров и групп.
    *   Обнаружение нелинейных связей и выбросов.
*   **Выбор в его пользу:** Это **основной инструмент** для изучения связи между двумя непрерывными переменными.
*   **Пример:** Связь между площадью дома и его ценой, рост и вес.

![bg right:40% w:400](https://r-graph-gallery.com/362-scatter-plot-with-trend-line-and-labels_files/figure-html/thecode3-1.png)

---

## Hexbin Plot

### Scatter plot для больших данных

*   **Что показывает:** Плотность точек в областях.
*   **Когда использовать?**
    Визуализация scatter plot при большом количестве данных.
*   **Выбор в его пользу:** Когда данных **слишком много** для обычного scatter plot.
*   **Пример:** Взаимосвязь координат миллионов поездок такси в Нью-Йорке.

![bg right:60% w:600](https://miro.medium.com/v2/resize:fit:1400/1*57YZYHm3JiPP3hdmbGAnQQ.png)

---

## Line Plot (Линейный график)

### Тренды во времени

*   **Что показывает:** Изменение числовой переменной относительно другой (чаще всего времени).
*   **Кейсы применения:**
    *   Отображение трендов, сезонности, изменений во времени.
    *   Сравнение нескольких временных рядов.
*   **Выбор в его пользу:** Для данных, имеющих **естественный порядок**.
*   **Пример:** Динамика цен на акции, количество пользователей по дням.

![bg right:40% w:500](https://vitalflux.com/wp-content/uploads/2023/05/Seaborn-multiple-line-plots-using-markers-legends.png)

---

## Heatmap (Тепловая карта)

### Матрица интенсивностей

*   **Что показывает:** Интенсивность значения в виде цвета в двумерной матрице.
*   **Кейсы применения:**
    *   **Матрица корреляции.**
    *   **Сводные таблицы.**
    *   **Представление отсутствующих данных.**
*   **Выбор в его пользу:** Когда нужно быстро **усреднить взглядом** матрицу чисел и найти паттерны.

![bg right:40% w:500](https://www.datylon.com/hubfs/Datylon%20Website2020/Datylon%20Chart%20library/Chart%20pages/Heatmap/Inspiration%20Slider/datylon-chart-library-heatmap-inspiration-slider-03.png)

---

## Stacked Bar Chart

### Часть и целое

*   **Что показывает:** Вклад отдельных частей в общую величину для каждой категории.
*   **Кейсы применения:**
    *   Показать состав категорий и его изменение.
    *   Сравнить общие суммы, а также вклад компонентов.
*   **Выбор в его пользу:** Когда важно одновременно сравнить **общие итоги** и **состав**.
*   **Пример:** Общие продажи по кварталам с разбивкой по продуктам.

![bg right:40% w:500](https://wac-cdn.atlassian.com/dam/jcr:fe81d114-5259-49c8-8c99-affc2bc665fc/stacked-bar-example-1.png?cdnVersion=2904)

---

## Bubble Chart (Пузырьковая диаграмма)

### Scatter plot с третьим измерением

*   **Что показывает:** Отношение между тремя переменными (X, Y, размер пузыря).
*   **Кейсы применения:**
    *   Добавить дополнительное измерение к scatter plot.
    *   Для демонстрации данных, где размер имеет значение.
*   **Выбор в его пользу:** Когда нужно наглядно показать **три числовых переменных** одновременно (иногда - с разными цветами пузырей для отображения категорий).
*   **Пример:** Визуализация дат выпуска LLM, с указанием качества на бенчмарке, количества параметров модели и компании-автора.

![bg right:50% w:650](https://media.licdn.com/dms/image/v2/D4E22AQEt2PPBmzt43g/feedshare-shrink_800/B4EZTYAGrzHcAk-/0/1738790694036?e=2147483647&v=beta&t=ZfPZ6--SMSeTkdLCRQcqvF4LtZyPKo_viwJ6F3i0BLo)

---

## Radar Chart (Лепестковая диаграмма)

### Сравнение профилей

*   **Что показывает:** Значения нескольких переменных для одного или нескольких наблюдений.
*   **Кейсы применения:**
    *   Сравнение профилей объектов по многим параметрам.
    *   **Осторожно!** Воспринимается критически.
*   **Выбор в его пользу:** Для стильного, но **неточного** сравнения профилей.
*   **Пример:** Сравнение двух автомобилей по параметрам.

![bg vertical right:40% w:300](https://www.cs.middlebury.edu/~candrews/showcase/infovis_techniques_s16/radar_chart/chart.png)
![bg right:40% w:300](https://static.wikia.nocookie.net/579fa396-b73e-4ecf-859e-47d6df84b038/scale-to-width/755)


---

## Диаграмма Ганта (Gantt Chart)

### Визуализация процессов во времени

*   **Что показывает:** Продолжительность задач и их взаимосвязь на временной шкале.
*   **Кейсы применения:**
    *   Управление проектами, планирование.
    *   Аналир временных интервалов.
*   **Выбор в его пользу:** Когда нужно показать **начало, конец и длительность** процессов.
*   **Пример:** Roadmap разработки продукта \ визуализация фолдов для time series валидации

![bg right:40% w:500](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSMOkYdFR1MrTL-jP6VRHufmRlAYcirffYPxhP4a7uWVSewyS9owouTgM7dDPQ7Q4wCkR8&usqp=CAU)

---

## Сравнительная таблица: Какой график выбрать?

### Шпаргалка по выбору графика

| Ваш вопрос / цель | Тип данных | Лучший тип графика | Альтернатива |
| :--- | :--- | :--- | :--- |
| **Как распределена одна числовая переменная?** | Числовая | Гистограмма, KDE | Box plot |
| **Сравнить распределения по группам?** | Числовая + Категорийная | Violin plot, Box plot | Гистограмма/KDE |
| **Сравнить величины по категориям?** | Категорийная | Bar chart | - |
| **Есть ли связь между X и Y?** | Две числовые | Scatter plot | Hexbin |
| **Как меняется показатель во времени?** | Числовая + Время | Line plot | Area chart |
| **Какова структура целого?** | Категорийная | Stacked bar chart | *Pie chart* |
| **Есть ли паттерны в матрице?** | Любые | Heatmap | - |
| **Сравнить объекты по 5+ параметрам?** | Числовая | **Bar chart** | Radar chart |

---

# Show, don't tell

---

![bg w:80%](image-9.png)

---

![bg w:80%](image-10.png)

---

# Как исправить данный график?

---

![bg w:50%](image-4.png)

---

![bg w:45%](image-5.png)

---

![bg w:50%](image-6.png)

---

![bg w:50%](image-7.png)

---

![bg w:50%](image-8.png)

---

# Как графиком доносить конкретную мысль

---

![alt text](image-11.png)

---

![alt text](image-12.png)

---

![alt text](image-13.png)

---

![alt text](image-14.png)

---

# Как графиком можно обмануть восприятие

---

![bg vertical w:35%](image-2.png)

---

![bg w:35%](image-3.png)

---

# Пример плохой аналитики данных

---

![bg w:45%](image-15.png)

---

![bg w:30%](image-16.png)

---

# Правила работы с цветом

*   **Смысл:** Используй цвет, чтобы подчеркнуть смысл, а не для украшения.
*   **Контраст:** Убедись, что цвета достаточно контрастны.
*   **Дальтонизм:** ~8% мужчин — дальтоники. Избегай красно-зеленых палитр.
*   **Количество:** 3-5 основных цветов обычно достаточно.
*   **Инструменты:** Пользуйтесь палитрами (ColorBrewer, Viridis).

![bg vertical right:40% w:500](https://kirby.datawrapper.de/media/pages/blog/beautifulcolors/587cd73c27-1740123117/full-200805_goodcolors9.png)
![bg vertical right:40% w:300](https://cdns.tblsft.com/sites/default/files/blog/color2.png)

---

## Аннотации и повествование

### Добавь рассказ к своим данным

*   **Заголовок:** Должен отражать главный вывод.
*   **Подписи осей:** Четкие, с единицами измерения.
*   **Аннотации:** Стрелки, краткий текст, выделение ключевых точек.
*   **Убери лишнее:** Сетка должна быть легкой, не доминировать.
*   **Цитата:** «График — это абзац в истории, которую вы рассказываете о данных».

![bg vertical right:40% w:500](https://r-graph-gallery.com/web-line-chart-with-labels-at-end-of-line_files/figure-html/unnamed-chunk-6-1.png)
![bg right:40% w:500](https://r-graph-gallery.com/web-line-chart-with-labels-at-end-of-line_files/figure-html/unnamed-chunk-8-1.png)

---

## Инструменты для построения

### Чем строить?

*   **Python:** `matplotlib` (гибкий), `seaborn` (красиво, статистический), `plotly` (интерактивный).
*   **BI-системы:** Tableau, Power BI — для дашбордов без кода.
*   **Рекомендация:** Начните с `seaborn` для EDA в Python.


---

## Золотые правила визуализации

### Главные заповеди

1.  **Знай свою аудиторию и цель.**
2.  **Выбирай простоту и ясность над сложностью.**
3.  **Всегда начинай ось с нуля для bar chart.**
4.  **Подписывай оси и добавляй понятный заголовок.**
5.  **Используй цвет с умом и для выделения смысла.**
6.  **Удаляй весь визуальный мусор.**
7.  **Сортируй категории для лучшего восприятия.**
8.  **Не используй 3D-графики (никогда!).**
9.  **Говори правду данными.**
10. **Спрашивай «So what?» для каждого графика.**

---

## Итоги: EDA как суперсила

1.  EDA — это **образ мышления**, а не просто этап проекта.
2.  **Правильный выбор графика** — ключ как к результативной работе с заказчиком, так и к моделированию
3.  Следуй принципам **«Show, don't tell»** и **«So what?»**.
4.  Хорошая визуализация — это **честная, простая и акцентированная**.
5.  Практикуйся в преобразовании плохих графиков в хорошие.
6.  Ваша цель — не просто построить график, а **извлечь и донести инсайт**.
